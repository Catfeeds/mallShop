

<!doctype html>
<html lang="zh-cn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,  minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>测测你的“阳光型抑郁”指数</title>
<script src="../../js/jquery-1.11.1.min.js"></script>
<script src="../../js/config.js"></script>
<script src="res/avalon.mobile.min.js"></script>
<!-- <link rel="stylesheet" type="text/css" href="css/wechat.css"> -->
<style>
  html,body {
    margin: 0;
    color: #000;
    background-color: #daf3ff;
    -webkit-tap-highlight-color: rgba(0,0,0,0);
  }

  #loading {
    text-align: center;
    font-size: 20px;
    line-height: 400px;
    display: none;
  }
  .loading #loading {
    display: block;
  }
  .loading .head,
  .loading .main {
    display: none;
  }
  .head img {
    width: 100%;
  }
  .main {
    padding: 10px;
    padding-top: 0;
    margin-top: -10px;
    text-align: center;
  }
  .t-t {
    font-size: 22px;
    line-height: 2em;
    text-align: left;
  }
  .t-s {
    padding: 5px;
    background-color: #fff;
    max-width: 60%;
    margin: 10px auto;
    text-align: center;
    position: relative;
    -webkit-transition: background-color 0.3s ease;
  }
  img {
    max-width: 100%;
  }
  .t-s img {
    max-width: 100%;
  }
  .t-s span {
    font-size: 1em;
    line-height: 1.5em;
  }
  .t-s.active {
    background-color: #27AE60;
  }
  .t-s.active span {
    color: #fff;
  }
  .t-s:after {
    position: absolute;
    right: 1px;
    top: 1px;
    padding: 4px;
    background: rgba(255,255,255,1);
    content: "√";
    display: none;
    opacity: 0;
    -webkit-transition: opacity 0.3s ease;
  }
  .t-s.active:after {
    display: block;
    opacity: 1;
  }
  .t-c {
    line-height: 1.2em;
    padding: 10px;
    margin-bottom: 10px;
    font-size: 1em;
    text-align: left;
  }
  .t-s.h {
    max-width: 40%;
    display: inline-block;
    margin-left: 5px;
    margin-right: 5px;
  }
  .t-r {
    margin-bottom: 10px;
  }
  .t-r span {
    display: inline-block;
    vertical-align: middle;
    font-size: 50px;
    color: #27AE60;
    /*color: rgba(0,0,0,0);*/
    text-shadow: 3px 0 4px #16A085;
  }
  .t-img {
    margin-top: 10px;
    margin-bottom: 10px;
  }
  .t-img img {
    max-width: 60%;
  }
  .t-btn,
  .t-btn:link,
  .t-btn:visited {
    color: #fff;
    background-color: #eca702;
    padding-top: 12px;
    padding-bottom: 13px;
    padding-left: 15px;
    padding-right: 15px;
    display: inline-block;
    line-height: 1em;
    min-width: 60%;
    margin: 10px auto;
    border-radius: 7px;
    text-decoration: none;
  }
  .share {
    position: fixed;
    top: 0;
    right: 0;
    left: 0;
    bottom: 0;
    background: rgba(0,0,0,0.6);
    display: none;
    z-index: 1000;
  }
  .share img {
    position: absolute;
    top: 0;
    right: 0;
    width: 70%;
    max-width: 320px;
  }
  .livetip {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0,0,0,0.7);
    z-index: 200;
  }
  .lt-w {
    position: fixed;
    top: 100px;
    left: 10px;
    right: 10px;
    z-index: 300;
  }
  .lt-w .lt-c {
    background-color: white;
    padding-top: 10px;
    padding-bottom: 20px;
  }

  .list{
    list-style:initial;
    text-align: left;
  }
  .list li {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
  a,
  a:link,
  a:visited {
    color: #607fa6;
  }
  .dialog{
    position: fixed;
    left: 0;top: 0;right: 0;bottom: 0;
  }
  .dialog-bg{
    position: absolute;
    left: 0;top: 0;right: 0;bottom: 0;
    background-color: rgba(0,0,0,0.7);
  }
  .dialog-con{
    position: absolute;
    width: 280px;
    top: 100px;
    background-color: white;
    left: 50%;
    margin-left: -140px;
    padding-bottom: 10px;
  }
</style>
</head>
<body class="loading">
<!--<script src="res/easou.js"></script>-->
<!--****************菜单***************-->
<!--****************菜单***************-->
<div id="loading">
  加载中
</div>
<div class="head">
  <img src="img/hd.jpg">
</div>
<div class="main" id="main" ms-controller="test">
  <!-- 测试题 -->
  <div ms-if="item.type=='hello'">
    <div class="t-c"
         ms-if="item.text">
      {{item.text}}
    </div>
    <div class="t-c"
         ms-if="item.text1">
      {{item.text1}}
    </div>
    <div class="t-s h"
         ms-repeat-elem="item.select"
         ms-class-active="elem.active"
         ms-on-click="elem.tap(elem, item.select)">
      <img ms-attr-src="{{elem.img}}">
      <span>{{elem.text}}</span>
    </div>
    <a class="t-btn" href="javascript:gzh()">
      关注人来风游戏，获得更多好玩的游戏
    </a>
  </div>
  <div ms-if="item.type=='select'">
    <div class="t-c">
      <div ms-if="item.img" style="margin-bottom:0.5em;">
        <img ms-attr-src="{{item.img}}">
      </div>
      {{item.id}}. {{item.text}}
    </div>
    <div class="t-s"
         ms-repeat-elem="item.select"
         ms-class-active="elem.active"
         ms-on-click="elem.tap(elem, item.select)">
      <img
        ms-if="!!elem.img"
        ms-attr-src="{{elem.img}}">
      <span>{{elem.text}}</span>
    </div>
  </div>
  <div ms-if="item.type=='result'">
    <div class="t-r">
      <span>{{item.ss}}</span>{{item.sstext}}
    </div>
    <div class="t-img" ms-if="!!item.img">
      <img ms-attr-src="{{item.img}}" >
    </div>
    <div class="t-c"
         ms-if="item.text">
      {{item.text}}
    </div>
    <div class="t-btn"
         ms-repeat-elem="endbtns"
         ms-on-click="elem.tap()">{{elem.text}}</div>
  </div>
  <div class="share"
       ms-if="showshare"
       ms-visible="showshare"
       ms-on-tap="hideshare()">
    <img src="img/share.png">
  </div>
  <div class="livetip"
       ms-visible="livetip"
       ms-on-tap="hidelivetip()">
  </div>
  <div class="lt-w"
       ms-visible="livetip">
    <div class="lt-c">
      <div class="t-c">
        还没分享哦，是否把这个好玩的东西分享给朋友后再离开呢？
      </div>
      <div class="t-btn"
           ms-on-tap="sharebox()">分享</div>
      <div class="t-btn white"
           ms-on-tap="livenow()">一会再说，先去看好玩的</div>
    </div>
  </div>
  <div class="dialog" ms-if="xunzhang">
    <div class="dialog-bg" ms-on-tap="hidexz()"></div>
    <div class="dialog-con">

    </div>
  </div>

</div>



<script>
var ID = getQueryString("sid") || Date.now() + "" + Math.floor(Math.random() * 1000);
addView();
var fen = 0;
function tap(elemvm, select, cb) {
  var a = false;
  for (var i = 0; i < select.length; i++) {

    a = a || select[i].active;
  };
  if (!a) {
    elemvm.active = true;
    setTimeout(function () {
      cb && cb()
    }, 500)
  }
}
function getQueryString(name) {
  var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
  var r = location.search.substr(1).match(reg);
  if (r != null) return unescape(decodeURI(r[2])); return null;
}
var model = avalon.define("test", function (vm) {

  vm.arr = [
    {
      type: "hello",
      text: "这是一个国外很流行的心理测试。人们总在寻找快乐，也试图将自己想象成一个乐观主义者，无奈生活中有太多的压力，以致一些人不得不强颜欢笑。这些人从表面看，是非常快乐充满激情的，可是会把自己的负面情绪隐藏起来，内心极其郁闷。这种现象，我们称之为阳光性抑郁症。那么，你会患上这种阳光型抑郁症吗？来做个心理测试吧！",
      text1: "点击开始测试咯~",
      select: [
        {
          img: "img/man.jpg",
          text: "男生",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[1];
              model.result.sex = 0;
            });
          }
        },
        {
          img: "img/woman.jpg",
          text: "女生",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[1];
              model.result.sex = 1;
            });
          }
        }
      ]
    }, {
      type: "select",
      id: 1,
      text: "你晚上经常做梦吗？",
      select: [
        {
          text: "很少做梦",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[2];
            });
          }
        }, {
          text: "一般",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[3];
            });
          }
        }, {
          text: "是的",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[4];
            });
          }
        }
      ]
    }, {
      type: "select",
      id: 2,
      text: "你会在自己发脾气之后又后悔吗？",
      select: [
        {
          text: "不确定",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[3];
            });
          }
        }, {
          text: "会",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[4];
            });
          }
        }, {
          text: "不会",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[5];
            });
          }
        }
      ]
    }, {
      type: "select",
      id: 3,
      text: "你对于自己喜欢吃的总是要吃到尽兴吗？",
      select: [
        {
          text: "是的",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[4];
            });
          }
        }, {
          text: "不确定",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[5];
            });
          }
        }, {
          text: "不会,吃一点就好",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[6];
            });
          }
        }
      ]
    }, {
      type: "select",
      id: 4,
      text: "你总是回忆过去的美好吗？",
      select: [
        {
          text: "不喜欢回忆过去，喜欢朝前看",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[5];
            });
          }
        }, {
          text: "是的",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[6];
            });
          }
        }, {
          text: "很少",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[7];
            });
          }
        }
      ]
    }, {
      type: "select",
      id: 5,
      text: "你认为自己能力如何？",
      select: [
        {
          text: "很差",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[6];
            });
          }
        }, {
          text: "很强",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[7];
            });
          }
        }, {
          text: "一般",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[8];
            });
          }
        }
      ]
    }, {
      type: "select",
      id: 6,
      text: "你经常去逛商场，但不知道自己要买什么吗？",
      select: [
        {
          text: "是的",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[7];
            });
          }
        }, {
          text: "这种情况有时候会出现",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[8];
            });
          }
        }, {
          text: "从来不会这样",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[9];
            });
          }
        }
      ]
    }, {
      type: "select",
      id: 7,
      text: "面对上司的要求你习惯回答肯定，但很少能顺利完成？",
      select: [
        {
          text: "这种情况比较多",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[8];
            });
          }
        }, {
          text: "不会，回答肯定，也能积极的顺利完成",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[9];
            });
          }
        }, {
          text: "是的",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[10];
            });
          }
        }
      ]
    }, {
      type: "select",
      id: 8,
      text: "你总是想象真的有世外桃源存在吗？",
      select: [
        {
          text: "从不相信会有",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[9];
            });
          }
        }, {
          text: "是的，一定有",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[10];
            });
          }
        }, {
          text: "不确定",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[11];
            });
          }
        }
      ]
    }, {
      type: "select",
      id: 9,
      text: "就算和热闹的人群在一起，你也会感到很孤单吗？",
      select: [
        {
          text: "不会",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[10];
            });
          }
        }, {
          text: "有时候会这样",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[11];
            });
          }
        }, {
          text: "是的",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[12];
            });
          }
        }
      ]
    }, {
      type: "select",
      id: 10,
      text: "就算睡了很长时间，也感到很疲劳？",
      select: [
        {
          text: "不会，会精力充沛",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[11];
            });
          }
        }, {
          text: "有一点",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[12];
            });
          }
        }, {
          text: "是的",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[15];
            });
          }
        }
      ]
    }, {
      type: "select",
      id: 11,
      text: "你会因为一首歌就泪流满面吗？",
      select: [
        {
          text: "会，经常这样",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[12];
            });
          }
        }, {
          text: "很少",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[14];
            });
          }
        }, {
          text: "不会",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[13];
            });
          }
        }
      ]
    }, {
      type: "select",
      id: 12,
      text: "你在朋友的聚会上是主动发起话题的人吗？",
      select: [
        {
          text: "不确定",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[16];
            });
          }
        }, {
          text: "不是",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[14];
            });
          }
        }, {
          text: "是的",
          active: false,
          tap: function (ele, select) {
            tap(ele, select, function () {
              model.item = model.arr[15];
            });
          }
        }
      ]
    }, {
      type: "result",
      id: 13,
      ss: "A",
      sstext: "阳光抑郁指数★",
      sstext1: "国外很流行的阳光抑郁指数，我是★，你来试试？",
      text: "你是一个情绪来得快，去得也很快的人，基本上很少会将忧郁因子沉淀下来。你的快乐毫不做作，你的笑声也总是充满了正能量。如果真的愤怒了，受了委屈，你就会用大声唱歌，不停的倾诉，大吃大喝一顿或是不分白天黑夜痛痛快快的睡一觉，这种自己的方式及时的宣泄出来。要你在难过的时候还假装没事，你真的做不到，你一直想要做的就是最真实的自己，真正阳光的一个人。有话直说是一件好事，但有的时候也要体谅别人的“假装快乐”，你要做的只能是善意的影响，用你的阳光能量去感染周围所有你爱和爱你的人。"
    }, {
      type: "result",
      id: 14,
      ss: "B",
      sstext: "阳光抑郁指数★★",
      sstext1: "国外很流行的阳光抑郁指数，我是★★，你来试试？",
      text: "你不是不愿意去隐藏自己不愉快的心事，之所以好心情和坏心情总是表现的如此明显，是因为根本就不会隐藏。快乐的事情总是习惯第一时间就拿出来分享，脸上洋溢的微笑也绝对不会是装出来的，感染力自然非同小可。就算有不愿说出来的伤心，强忍着也忍不了多久，毕竟你受伤的表情早已出卖了你。你的阳光灿烂令人情不自禁就跟着微笑，你的抑郁轻易就能随风飘逝，就好像从未来过。人一辈子交几个真心的朋友真的很重要，至少在你想找人倾诉心事的时候，会有真心的听众，分担你的忧愁，让你找不到抑郁的机会。"
    }, {
      type: "result",
      id: 15,
      ss: "C",
      sstext: "阳光抑郁指数★★★",
      sstext1: "国外很流行的阳光抑郁指数，我★★★，你来试试？",
      text: "你不仅有着强烈的不安感，也是一个追求完美的人。你表面上看起来很坚强，实际上内心相当的脆弱，只要受伤，就很难真正的复原，又因为潜意识里就希望别人眼中自己是一个自信乐观的人，所以你大部分时候表现出来的都是一个快乐的人，但是真正了解你的人，就会知道这样的阳光有多虚假。明明睡的很早，却总是有黑眼圈，你累积的负面情绪极需一个释放的出口。要认清自己真实的感受，不要陶醉于自我塑造的虚假阳光里，相信爱你的人会真的帮助到你，心越坦诚，真正的阳光才会多起来。"
    }, {
      type: "result",
      id: 16,
      ss: "D",
      sstext: "阳光抑郁指数★★★★★",
      sstext1: "国外很流行的阳光抑郁指数，我★★★★★，你来试试？",
      text: "你人前人后的表现实在是判若两人，甚至有一点精神分裂的嫌疑。不管遇到多大的麻烦，受了多大的委屈，你都好像完全不在意，“如若不坚强，伤心给谁看”是你心里一直都在不断告诉自己的话，你不准自己随意依赖，不准自己表现脆弱，你只准自己向大家展示积极向上的一面。但实际上，你转身过去时那微笑收敛一刹那的隐痛，要一个人承受好久，真正的快乐也早已离你远去了。人生的旅程不会一直顺利，总会有失败，但不要因为怕受伤就伪装自己，及时的发泄，才能找回前进的勇气和快乐。"
    }
  ];
  vm.item = vm.arr[0];
  vm.endbtns = [
    {
      text: "晒出你的阳光抑郁指数",
      tap: function () {
        model.showshare = true;
      }
    }, {
      text: "关注人来风游戏，获得更多好玩的游戏",
      tap: function () {
        gzh();
      }
    }, {
      text: "再测一次",
      tap: function () {

        model.result.sex = 0;
        for (var i = 0; i < model.arr.length; i++) {
          var tmp = model.arr[i];
          if (tmp.select) {

            for (var ii = 0; ii < tmp.select.length; ii++) {
              tmp.select[ii].active = false;
            }
          };
        };
        model.item = model.arr[0];
      }
    }, {
      text: "我还想玩其他好玩的",
      tap: function () {
        if (model.shared) {
          location.href = model.$otherurl;
        } else {
          model.livetip = true;
        }
      }
    }
  ]
  vm.$otherurl = siteurl + "#TEST";
  vm.result = {
    sex: 0
  }
  vm.showshare = false;
  vm.hideshare = function () {
    model.showshare = false;
  }
  vm.shared = false;
  vm.sharebox = function () {
    model.showshare = true;
  }
  vm.livetip = false;
  vm.hidelivetip = function () {
    model.livetip = false;
  }
  vm.livenow = function () {
    location.href = model.$otherurl;
  }
  vm.xunzhang = false;
  vm.hidexz = function () {
    model.xunzhang = false;
  }
  vm.showxz = function () {
    model.xunzhang = true;
  }
  vm.$watch("item", function (newval) {
    if (newval.type == 'result') {
      testEnd(newval.id);
    };
  })
});
document.body.className = "";

// 增加访问量
function addView() {

}
// 增加使用
function addUse() {

}
// 增加分享
function addShare() {

}
function shareToFre(desc) {

  if (!desc) {
    desc = '测你的"阳光型抑郁"指数,国外超火的心理题';
  } else {
    desc = desc;
  }
  // 朋友圈
  var data = {
    "imgUrl": "/ceshi/yy/img/icon.jpg",
    "link": siteurl + "/ceshi/yy",
    "desc": desc,
    "title": '测你的"阳光型抑郁"指数,国外超火的心理题'
  };

  // share to frends
  var data = data;
  var callbacks = {};
  callbacks.ok = callbacks.confirm = function () {
    model.shared = true;
    addShare();
  };

  // 分享给朋友
  var data2 = {
    "imgUrl": "/ceshi/yy/img/icon.jpg",
    "link": siteurl + "/ceshi/yy",
    "desc": '测你的"阳光型抑郁"指数,国外超火的心理题',
    "title": desc
  };

  weixinShareTimeline(data, callbacks);

  weixinSendAppMessage(data2, callbacks);
}
document.addEventListener('WeixinJSBridgeReady', function () {
  shareToFre();
}, false);


// 分享到朋友圈
function weixinShareTimeline(data, callbacks) {
  callbacks = callbacks || {};
  var shareTimeline = function (theData) {
    WeixinJSBridge.invoke('shareTimeline', {
      "appid": theData.appId ? theData.appId : '',
      "img_url": theData.imgUrl,
      "link": theData.link,
      "desc": theData.title,
      "title": theData.desc, // 注意这里要分享出去的内容是desc
      "img_width": "120",
      "img_height": "120"
    }, function (resp) {
      switch (resp.err_msg) {
        // share_timeline:cancel 用户取消
        case 'share_timeline:cancel':
          callbacks.cancel && callbacks.cancel(resp);
          break;
        // share_timeline:fail　发送失败
        case 'share_timeline:fail':
          callbacks.fail && callbacks.fail(resp);
          break;
        // share_timeline:confirm 发送成功
        case 'share_timeline:confirm':
          callbacks.confirm && callbacks.confirm(resp);
          break;
        // 发送成功
        case 'share_timeline:ok':
          callbacks.ok && callbacks.ok(resp);
          break;
      }
      // 无论成功失败都会执行的回调
      callbacks.all && callbacks.all(resp);
    });
  };
  WeixinJSBridge.on('menu:share:timeline', function (argv) {
    if (callbacks.async && callbacks.ready) {
      if (!callbacks.__dataLoadedFuncInited) {
        var loadedCb = callbacks.dataLoaded || new Function();
        callbacks.dataLoaded = function (newData) {
          loadedCb(newData);
          shareTimeline(newData);
        };
        callbacks.__dataLoadedFuncInited = true;
      }
      // 然后就绪
      callbacks.ready && callbacks.ready(argv);
    } else {
      // 就绪状态
      callbacks.ready && callbacks.ready(argv);
      shareTimeline(data);
    }
  });
}

// 分享给朋友
function weixinSendAppMessage(data, callbacks) {
  callbacks = callbacks || {};
  var sendAppMessage = function (theData) {
    WeixinJSBridge.invoke('sendAppMessage', {
      "appid": theData.appId ? theData.appId : '',
      "img_url": theData.imgUrl,
      "link": theData.link,
      "desc": theData.desc,
      "title": theData.title,
      "img_width": "120",
      "img_height": "120"
    }, function (resp) {
      switch (resp.err_msg) {
        // send_app_msg:cancel 用户取消
        case 'send_app_msg:cancel':
          callbacks.cancel && callbacks.cancel(resp);
          break;
        // send_app_msg:fail　发送失败
        case 'send_app_msg:fail':
          callbacks.fail && callbacks.fail(resp);
          break;
        // send_app_msg:confirm 发送成功
        case 'send_app_msg:confirm':
          callbacks.confirm && callbacks.confirm(resp);
          break;
      }
      // 无论成功失败都会执行的回调
      callbacks.all && callbacks.all(resp);
    });
  };
  WeixinJSBridge.on('menu:share:appmessage', function (argv) {
    if (callbacks.async && callbacks.ready) {
      if (!callbacks.__dataLoadedFuncInited) {
        var loadedCb = callbacks.dataLoaded || new Function();
        callbacks.dataLoaded = function (newData) {
          loadedCb(newData);
          sendAppMessage(newData);
        };
        callbacks.__dataLoadedFuncInited = true;
      }
      // 然后就绪
      callbacks.ready && callbacks.ready(argv);
    } else {
      // 就绪状态
      callbacks.ready && callbacks.ready(argv);
      sendAppMessage(data);
    }
  });
}

function testEnd(id) {
  addUse();

  shareToFre(model.item.sstext1);
}
</script>
<script src="../../js/ad-pic.js"></script>
</body>
</html>